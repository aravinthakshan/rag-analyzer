{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DocumentAnalyzer=()=>{const[file,setFile]=useState(null);const[extractedText,setExtractedText]=useState(\"\");const[chatHistory,setChatHistory]=useState([]);const[userMessage,setUserMessage]=useState(\"\");const[loading,setLoading]=useState(false);const handleFileChange=event=>{setFile(event.target.files[0]);};const uploadFile=async()=>{if(!file){alert(\"Please select a file to upload.\");return;}const formData=new FormData();formData.append(\"file\",file);try{setLoading(true);const response=await axios.post(\"http://127.0.0.1:8000/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});setExtractedText(response.data.extracted_text);setLoading(false);}catch(error){console.error(\"Error uploading file:\",error);alert(\"Failed to upload file. Please try again.\");setLoading(false);}};const sendMessage=async()=>{if(!userMessage){alert(\"Please enter a message.\");return;}const newChatHistory=[...chatHistory,{role:\"user\",content:userMessage}];try{setLoading(true);const response=await axios.post(\"http://127.0.0.1:8000/chat\",{messages:newChatHistory});const botMessage={role:\"assistant\",content:response.data.response};setChatHistory([...newChatHistory,botMessage]);setUserMessage(\"\");setLoading(false);}catch(error){console.error(\"Error interacting with AI:\",error);alert(\"Failed to communicate with AI. Please try again.\");setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Document Analyzer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Upload a file (PDF or DOCX)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf, .docx\",onChange:handleFileChange,className:\"block w-full text-sm text-gray-500 border border-gray-300 rounded-lg cursor-pointer\"}),/*#__PURE__*/_jsx(\"button\",{onClick:uploadFile,className:\"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\",children:\"Upload File\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-500\",children:\"Processing...\"}),extractedText&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 border rounded bg-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Extracted Text:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-700 whitespace-pre-line\",children:extractedText})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-2\",children:\"Chat with AI\"}),/*#__PURE__*/_jsx(\"textarea\",{value:userMessage,onChange:e=>setUserMessage(e.target.value),rows:\"3\",className:\"w-full border rounded p-2 mb-2\",placeholder:\"Type your message here...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\",children:\"Send Message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-2\",children:\"Chat History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded p-4 bg-gray-50\",children:chatHistory.map((chat,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[chat.role===\"user\"?\"You\":\"AI\",\":\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-2\",children:chat.content})]},index))})]})]});};export default DocumentAnalyzer;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","DocumentAnalyzer","file","setFile","extractedText","setExtractedText","chatHistory","setChatHistory","userMessage","setUserMessage","loading","setLoading","handleFileChange","event","target","files","uploadFile","alert","formData","FormData","append","response","post","headers","data","extracted_text","error","console","sendMessage","newChatHistory","role","content","messages","botMessage","className","children","type","accept","onChange","onClick","value","e","rows","placeholder","map","chat","index"],"sources":["/home/as-aravinthakshan/Desktop/document-analyzer/frontend/src/components/DocumentAnalyzer.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst DocumentAnalyzer = () => {\n  const [file, setFile] = useState(null);\n  const [extractedText, setExtractedText] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n  const [userMessage, setUserMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  const uploadFile = async () => {\n    if (!file) {\n      alert(\"Please select a file to upload.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      setLoading(true);\n      const response = await axios.post(\"http://127.0.0.1:8000/upload\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n      setExtractedText(response.data.extracted_text);\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Error uploading file:\", error);\n      alert(\"Failed to upload file. Please try again.\");\n      setLoading(false);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!userMessage) {\n      alert(\"Please enter a message.\");\n      return;\n    }\n\n    const newChatHistory = [\n      ...chatHistory,\n      { role: \"user\", content: userMessage },\n    ];\n\n    try {\n      setLoading(true);\n      const response = await axios.post(\"http://127.0.0.1:8000/chat\", {\n        messages: newChatHistory,\n      });\n      const botMessage = {\n        role: \"assistant\",\n        content: response.data.response,\n      };\n      setChatHistory([...newChatHistory, botMessage]);\n      setUserMessage(\"\");\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Error interacting with AI:\", error);\n      alert(\"Failed to communicate with AI. Please try again.\");\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Document Analyzer</h1>\n\n      <div className=\"mb-4\">\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Upload a file (PDF or DOCX)\n        </label>\n        <input\n          type=\"file\"\n          accept=\".pdf, .docx\"\n          onChange={handleFileChange}\n          className=\"block w-full text-sm text-gray-500 border border-gray-300 rounded-lg cursor-pointer\"\n        />\n        <button\n          onClick={uploadFile}\n          className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n        >\n          Upload File\n        </button>\n      </div>\n\n      {loading && <p className=\"text-blue-500\">Processing...</p>}\n\n      {extractedText && (\n        <div className=\"mt-4 p-4 border rounded bg-gray-100\">\n          <h2 className=\"text-xl font-bold\">Extracted Text:</h2>\n          <p className=\"mt-2 text-gray-700 whitespace-pre-line\">{extractedText}</p>\n        </div>\n      )}\n\n      <div className=\"mt-4\">\n        <h2 className=\"text-xl font-bold mb-2\">Chat with AI</h2>\n        <textarea\n          value={userMessage}\n          onChange={(e) => setUserMessage(e.target.value)}\n          rows=\"3\"\n          className=\"w-full border rounded p-2 mb-2\"\n          placeholder=\"Type your message here...\"\n        ></textarea>\n        <button\n          onClick={sendMessage}\n          className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\"\n        >\n          Send Message\n        </button>\n      </div>\n\n      <div className=\"mt-4\">\n        <h2 className=\"text-xl font-bold mb-2\">Chat History</h2>\n        <div className=\"border rounded p-4 bg-gray-50\">\n          {chatHistory.map((chat, index) => (\n            <div key={index} className=\"mb-2\">\n              <strong>{chat.role === \"user\" ? \"You\" : \"AI\"}:</strong>\n              <p className=\"ml-2\">{chat.content}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentAnalyzer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}